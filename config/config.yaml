# Project settings
project_name: "Visium HD - Cancer Territories"
data_dir: "data/"

# Sample definitions - can be filenames or identifiers
samples:
  - 485_manual
  - 27495_manual
  - 31491_manual
  - PC1
  - PC2
  - PC3

# Input file mapping
input_files:
  485_manual:
    coordinates: "data/ovarian/485_manual/outs/binned_outputs/square_002um/spatial/tissue_positions.parquet"
    counts     : "data/ovarian/485_manual/outs/binned_outputs/square_002um/filtered_feature_bc_matrix.h5"
    image      : "data/images/uploads/485_Cyt.tif"
    scale      : "data/ovarian/485_manual/outs/binned_outputs/square_002um/spatial/scalefactors_json.json"
  27495_manual:
    coordinates: "data/ovarian/27495_manual/outs/binned_outputs/square_002um/spatial/tissue_positions.parquet"
    counts     : "data/ovarian/27495_manual/outs/binned_outputs/square_002um/filtered_feature_bc_matrix.h5"
    image      : "data/images/uploads/27495_Cyt.tif"
    scale      : "data/ovarian/27495_manual/outs/binned_outputs/square_002um/spatial/scalefactors_json.json"
  31491_manual:
    coordinates: "data/ovarian/31491_manual/outs/binned_outputs/square_002um/spatial/tissue_positions.parquet"
    counts     : "data/ovarian/31491_manual/outs/binned_outputs/square_002um/filtered_feature_bc_matrix.h5"
    image      : "data/images/uploads/31491_Cyt.tif"
    scale      : "data/ovarian/31491_manual/outs/binned_outputs/square_002um/spatial/scalefactors_json.json"
  PC1:
    coordinates: "data/pancreatic/PC1/outs/binned_outputs/square_002um/spatial/tissue_positions.parquet"
    counts     : "data/pancreatic/PC1/outs/binned_outputs/square_002um/filtered_feature_bc_matrix.h5"
    image      : "data/images/uploads/PC1_Cyt.tif"
    scale      : "data/pancreatic/PC1/outs/binned_outputs/square_002um/spatial/scalefactors_json.json"
  PC2:
    coordinates: "data/pancreatic/PC2/outs/binned_outputs/square_002um/spatial/tissue_positions.parquet"
    counts     : "data/pancreatic/PC2/outs/binned_outputs/square_002um/filtered_feature_bc_matrix.h5"
    image      : "data/images/uploads/PC2_Cyt.tif"
    scale      : "data/pancreatic/PC2/outs/binned_outputs/square_002um/spatial/scalefactors_json.json"
  PC3:
    coordinates: "data/pancreatic/PC3/outs/binned_outputs/square_002um/spatial/tissue_positions.parquet"
    counts     : "data/pancreatic/PC3/outs/binned_outputs/square_002um/filtered_feature_bc_matrix.h5"
    image      : "data/images/uploads/PC2_Cyt.tif"
    scale      : "data/pancreatic/PC3/outs/binned_outputs/square_002um/spatial/scalefactors_json.json"
  
# QC parameters
qc:
  min_cells    : 100
  min_features : 100
  bin_size     : 32


# Vesalius parameters
vesalius:
  feature_set   : true
  resolution    : 1
  dim_reduc     : "PCA"
  dims          : 30
  equalize      : 2.5
  sigma         : 2
  iter          : 20
  col_resolution: 20 
  distance      : 0.01


# Kuresi parameters
kuresi:
  method: "mean_ratio"
  scale : true
  center: true
 

 


# ============================================================================
# HPC-OPTIMIZED RESOURCE ALLOCATION
# ============================================================================


resources:
  qc:
    mem_mb: 80000      
    time_min: 120       
    cpus: 1           
  vesalius:
    mem_mb: 80000      
    time_min: 480      
    cpus: 4           
  kuresi:
    mem_mb: 80000      
    time_min: 120      
    cpus: 1            
  
             

# ============================================================================
# SLURM-SPECIFIC SETTINGS
# ============================================================================

# Partition/Queue configuration
# Adjust based on your HPC's queue names (check with: sinfo)
slurm:
  slurm_account: "martinp4"
  partition: defq
  mail_type : FAIL,BEGIN,END
  mail_user : patrick.martin@cshs.org
  

# Logging
log_dir: "logs"
slurm_log_dir: "logs/slurm"  # For SLURM output files
